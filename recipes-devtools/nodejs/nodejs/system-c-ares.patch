From 63f11d5af7421e5cd4db943949d2adc89c0b98ce Mon Sep 17 00:00:00 2001
From: Khem Raj <raj.khem@gmail.com>
Date: Wed, 25 Jan 2023 20:11:26 +0100
Subject: [PATCH] keep nodejs compatible with c-ares 1.17.1

Upstream-Status: Inappropriate [c-ares specific]
Signed-off-by: Khem Raj <raj.khem@gmail.com>

---
 src/cares_wrap.h | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/src/cares_wrap.h b/src/cares_wrap.h
index ea339b77..cfcea993 100644
--- a/src/cares_wrap.h
+++ b/src/cares_wrap.h
@@ -23,7 +23,15 @@
 # include <netdb.h>
 #endif  // __POSIX__
 
-# include <ares_nameser.h>
+#if defined(__ANDROID__) || \
+    defined(__MINGW32__) || \
+    defined(__OpenBSD__) || \
+    defined(_MSC_VER)
+
+# include <nameser.h>
+#else
+# include <arpa/nameser.h>
+#endif
 
 namespace node {
 namespace cares_wrap {
